# Voorbeeld database design

Het volgende is een voorbeeld van een database design voor OMS Light:

[![voorbeeld design](https://www.plantuml.com/plantuml/png/Z9N1ZjCm48RlUGgpN41Y9OJK0ptn7WWin_wtCMjxmdXSw2BUdRX06pVPRbEfqlZ_FMD_dZYViXYM4aFNlP814MeCngTEQ5H2gYSHYifvXXLFgSkFFes6JLJ19yXXX2AMWRhE1fEpeZw3zwPwrQzEgVc0hlQjoj64QR9KbP5B42q-JaBzpsBYM9LnGAA8H6bLPR9mXQ6zswfIl3lNWjEJF8BbqAWFC59dq8FsIS38qkXvoXryskaiR0IxPdQpZxq91LlrBLFggtRo_LvIq9P2W6s1jDg9pR5WNTiEVCkAMmgtxsETKKlz0hhwuMKuXkg94jgpUy5OA3P5zcHDNuBXjlQD57L4xC7NO3vxS8iIZ0SmaiKntJdyrwfxmtOm_6Rp_cqhMt8p-SDcSw4dSuI2dzAEEoDcrZYP2bjSfv17M1ynTKzpk1VO6or21dBhJH78DYnQ5G5jZpigVO0Q6TRdQVmPTw7uOaAmU6j2PL1QjotCI79UspJryRgZeZq3NiWxK8JmOSxQF-7ghgg-kWyu_VzDN6hB5_VQ8Mf6C0Ad5_VaoN5pxzP02-b77FwcACb_BwZncKpXC0lAB4atNyBAS__vzUPZ_RqxVX6-t7-TDR9QUxRghhcHlBlxquiTf4080q4KlPg7qQsxt5y3qXJo5o7ckv_qcyaqPQ62OC1P6EQbXL7WptEn8CpTerlhmpb6lLK8HFXtBAoUMwh2sorXFU_6nqlxd9oupzKSS7WSuU6lB9vdu4Wm-84I-SO_BboL41OMvanrcPLVVwHgM7YMXXz_e2zcwp4fh7uc22LPfx9p1yPjS5qyJJ1y3S7KpCVOZdFlRmyk)](https://www.plantuml.com/plantuml/png/Z9N1ZjCm48RlUGgpN41Y9OJK0ptn7WWin_wtCMjxmdXSw2BUdRX06pVPRbEfqlZ_FMD_dZYViXYM4aFNlP814MeCngTEQ5H2gYSHYifvXXLFgSkFFes6JLJ19yXXX2AMWRhE1fEpeZw3zwPwrQzEgVc0hlQjoj64QR9KbP5B42q-JaBzpsBYM9LnGAA8H6bLPR9mXQ6zswfIl3lNWjEJF8BbqAWFC59dq8FsIS38qkXvoXryskaiR0IxPdQpZxq91LlrBLFggtRo_LvIq9P2W6s1jDg9pR5WNTiEVCkAMmgtxsETKKlz0hhwuMKuXkg94jgpUy5OA3P5zcHDNuBXjlQD57L4xC7NO3vxS8iIZ0SmaiKntJdyrwfxmtOm_6Rp_cqhMt8p-SDcSw4dSuI2dzAEEoDcrZYP2bjSfv17M1ynTKzpk1VO6or21dBhJH78DYnQ5G5jZpigVO0Q6TRdQVmPTw7uOaAmU6j2PL1QjotCI79UspJryRgZeZq3NiWxK8JmOSxQF-7ghgg-kWyu_VzDN6hB5_VQ8Mf6C0Ad5_VaoN5pxzP02-b77FwcACb_BwZncKpXC0lAB4atNyBAS__vzUPZ_RqxVX6-t7-TDR9QUxRghhcHlBlxquiTf4080q4KlPg7qQsxt5y3qXJo5o7ckv_qcyaqPQ62OC1P6EQbXL7WptEn8CpTerlhmpb6lLK8HFXtBAoUMwh2sorXFU_6nqlxd9oupzKSS7WSuU6lB9vdu4Wm-84I-SO_BboL41OMvanrcPLVVwHgM7YMXXz_e2zcwp4fh7uc22LPfx9p1yPjS5qyJJ1y3S7KpCVOZdFlRmyk)

De soorten Observations zijn **niet** uitgenormaliseerd in het model. De reden is dat op dat niveau referentiële referentie er weinig meer toe doet, en het model alleen maar complexer maakt. Ook is het nagenoeg onmogelijk voor de databaselaag om uit te zoeken welke waarden moeten worden samengevoegd. Dat is niet de taak van de database: de service is daarvoor verantwoordelijk.
De resultaten van een Observatie worden als JSON geserialiseerd. Dit maakt het model flexibeler.

References zijn een belangrijke entiteit binnen het model. Het is de bron voor items die vaker in het model voorkomen, als verschillende soorten entiteiten. Denk aan locaties, eenheden, grootheden, methoden, etc. Omdat er verschillende soorten referenties bestaan, die hun eigen databehoefte kunnen hebben, is reference_data óók als JSON geserialiseerd.

Intern maakt het model gebruik van unique identifiers, geen strings, zoals OMS voorsteld. Strings zijn voor databases erg inefficient als primary key.
In plaats daarvan is er een mapping tussen uuid en een string-representatie, tezamen met een URL voor externe links. Alle entiteiten (inclusief ObservationCollection, Specimen en Observation) dienen éérst een item aan te maken in de mapping-tabel.
